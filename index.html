<!-- I need to put this here, dont ask why --><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BreadQuest</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { background: #faf5e4; display: block; margin: auto; }
        #gameOverMessage { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2em; background: white; padding: 20px; border: 3px solid #333; border-radius: 10px; }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="gameOverMessage">Game Over! <button onclick="restartGame()">Restart</button></div>
    
    <script>
        // Game Setup
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const zones = ["Wheat Fields", "Flour Mountains", "Yeast Swamps", "Toasty Deserts", "Bread Castle"];
        const colors = ["#e7d09e", "#dedede", "#b0d7a3", "#f4c287", "#c49789"];
        let currentZone = 0;

        // Player Setup
        const player = {
            x: 100,
            y: 100,
            width: 40,
            height: 40,
            speed: 5,
            dx: 0,
            dy: 0,
            jumpPower: 10,
            isJumping: false,
            items: [],
            goldenLoaves: 0,
        };

        // Control Keys
        const keys = {
            right: { pressed: false },
            left: { pressed: false },
            up: { pressed: false },
        };

        // Bread-themed Elements
        const breadsticks = [];
        const goldenLoaves = [];
        const enemies = [];

        class Breadstick {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 20;
                this.height = 20;
            }
            draw() {
                ctx.fillStyle = "#c39b77";
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }
        }

        class GoldenLoaf {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 20;
                this.height = 20;
            }
            draw() {
                ctx.fillStyle = "#ffd700";
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }
        }

        class Enemy {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 40;
                this.height = 40;
            }
            draw() {
                ctx.fillStyle = "#8b4513";
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }
        }

        // Randomly position items
        function placeItems() {
            const maxItems = 5;
            for (let i = 0; i < maxItems; i++) {
                breadsticks.push(new Breadstick(Math.random() * canvas.width, Math.random() * canvas.height));
                goldenLoaves.push(new GoldenLoaf(Math.random() * canvas.width, Math.random() * canvas.height));
                enemies.push(new Enemy(Math.random() * canvas.width, Math.random() * canvas.height));
            }
        }

        // Move Player
        function movePlayer() {
            if (keys.right.pressed && player.x < canvas.width - player.width) {
                player.dx = player.speed;
            } else if (keys.left.pressed && player.x > 0) {
                player.dx = -player.speed;
            } else {
                player.dx = 0;
            }

            if (keys.up.pressed && !player.isJumping) {
                player.isJumping = true;
                player.dy = -player.jumpPower;
            }

            player.dy += 1;  // gravity
            player.x += player.dx;
            player.y += player.dy;

            if (player.y + player.height > canvas.height) {  // ground collision
                player.y = canvas.height - player.height;
                player.isJumping = false;
                player.dy = 0;
            }

            if (player.x > canvas.width) {
                nextZone();
            }
        }

        // Next Zone
        function nextZone() {
            currentZone++;
            if (currentZone >= zones.length) {
                endGame();
            } else {
                resetGame();
            }
        }

        // Game Over
        function endGame() {
            document.getElementById('gameOverMessage').style.display = 'block';
        }

        // Restart Game
        function restartGame() {
            document.getElementById('gameOverMessage').style.display = 'none';
            currentZone = 0;
            player.goldenLoaves = 0;
            resetGame();
        }

        // Reset Game
        function resetGame() {
            player.x = 0;
            player.y = canvas.height - player.height;
            breadsticks.length = 0;
            goldenLoaves.length = 0;
            enemies.length = 0;
            placeItems();
            draw();
        }

        // Draw Player and Items
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = colors[currentZone];
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw player
            ctx.fillStyle = "#ffbf00";
            ctx.fillRect(player.x, player.y, player.width, player.height);

            // Draw items
            breadsticks.forEach(b => b.draw());
            goldenLoaves.forEach(l => l.draw());
            enemies.forEach(e => e.draw());
        }

        // Update Game State
        function update() {
            movePlayer();
            draw();
            requestAnimationFrame(update);
        }

        // Key Event Listeners
        window.addEventListener('keydown', (e) => {
            switch (e.key) {
                case 'ArrowRight':
                    keys.right.pressed = true;
                    break;
                case 'ArrowLeft':
                    keys.left.pressed = true;
                    break;
                case 'ArrowUp':
                    keys.up.pressed = true;
                    break;
            }
        });

        window.addEventListener('keyup', (e) => {
            switch (e.key) {
                case 'ArrowRight':
                    keys.right.pressed = false;
                    break;
                case 'ArrowLeft':
                    keys.left.pressed = false;
                    break;
                case 'ArrowUp':
                    keys.up.pressed = false;
                    player.isJumping = false;
                    break;
            }
        });

        // Initialize Game
        placeItems();
        update();
    </script>
</body>
</html>