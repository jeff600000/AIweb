<!-- I need to put this here, dont ask why --><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bread Quest</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f4efe1;
        }
        canvas {
            border: 2px solid #ccc;
            background-image: linear-gradient(to top, #ffffff, #d7d2cc);
        }
    </style>
</head>
<body>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const player = {
        x: 100,
        y: 500,
        width: 40,
        height: 40,
        speed: 5,
        dx: 0,
        dy: 0
    };
    
    const breads = [
        { x: 200, y: 400, width: 30, height: 30 },
        { x: 500, y: 200, width: 30, height: 30 },
        { x: 600, y: 500, width: 30, height: 30 }
    ];

    const obstacles = [
        { x: 300, y: 450, width: 80, height: 20 },
        { x: 400, y: 350, width: 20, height: 80 },
        { x: 650, y: 250, width: 100, height: 20 }
    ];

    let score = 0;

    function drawPlayer() {
        ctx.fillStyle = 'saddlebrown';
        ctx.fillRect(player.x, player.y, player.width, player.height);
    }

    function drawBreads() {
        ctx.fillStyle = 'gold';
        breads.forEach(bread => {
            ctx.fillRect(bread.x, bread.y, bread.width, bread.height);
        });
    }

    function drawObstacles() {
        ctx.fillStyle = 'red';
        obstacles.forEach(obstacle => {
            ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
        });
    }

    function drawScore() {
        ctx.fillStyle = 'black';
        ctx.fillText(`Score: ${score}`, 20, 30);
    }

    function clear() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function newPos() {
        player.x += player.dx;
        player.y += player.dy;
        detectCollisions();
        detectBreadCollection();
    }

    function detectCollisions() {
        obstacles.forEach(obstacle => {
            if (player.x < obstacle.x + obstacle.width &&
                player.x + player.width > obstacle.x &&
                player.y < obstacle.y + obstacle.height &&
                player.y + player.height > obstacle.y) {
                player.x -= player.dx;
                player.y -= player.dy;
            }
        });
    }

    function detectBreadCollection() {
        breads.forEach((bread, index) => {
            if (player.x < bread.x + bread.width &&
                player.x + player.width > bread.x &&
                player.y < bread.y + bread.height &&
                player.y + player.height > bread.y) {
                score += 10;
                breads.splice(index, 1);
            }
        });
    }

    function update() {
        clear();
        drawPlayer();
        drawBreads();
        drawObstacles();
        drawScore();

        newPos();
        requestAnimationFrame(update);
    }

    function moveUp() {
        player.dy = -player.speed;
    }

    function moveDown() {
        player.dy = player.speed;
    }

    function moveRight() {
        player.dx = player.speed;
    }

    function moveLeft() {
        player.dx = -player.speed;
    }

    function keyDown(e) {
        if (e.key === 'ArrowRight' || e.key === 'Right') {
            moveRight();
        } else if (e.key === 'ArrowLeft' || e.key === 'Left') {
            moveLeft();
        } else if (e.key === 'ArrowUp' || e.key === 'Up') {
            moveUp();
        } else if (e.key === 'ArrowDown' || e.key === 'Down') {
            moveDown();
        }
    }

    function keyUp(e) {
        if (
            e.key === 'ArrowRight' ||
            e.key === 'Right' ||
            e.key === 'ArrowLeft' ||
            e.key === 'Left' ||
            e.key === 'ArrowUp' ||
            e.key === 'Up' ||
            e.key === 'ArrowDown' ||
            e.key === 'Down'
        ) {
            player.dx = 0;
            player.dy = 0;
        }
    }

    document.addEventListener('keydown', keyDown);
    document.addEventListener('keyup', keyUp);

    update();
</script>

</body>
</html>