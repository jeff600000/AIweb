<!-- I need to put this here, dont ask why --><!DOCTYPE html>
<html>
<head>
<title>Bread The Game</title>
<style type="text/css">
body {
  font-family: Arial, sans-serif;
  background-color: #f8f8f8;
}

.container {
  width: 750px;
  margin: auto;
}

#breadScore {
  text-align: center;
}

#myCanvas {
  background-color: #ffffff;
  margin-bottom: 50px;
  cursor: pointer;
}


</style>

<script>
window.onload = function() {

  let score = 0;
  const canvas = document.getElementById('myCanvas');
  const context = canvas.getContext('2d');
  canvas.width = 700;
  canvas.height = 500;

  function Bread(x, y) {
    this.x = x;
    this.y = y;
    this.width = 50;
    this.height = 20;

    this.draw = function() {
      context.fillStyle = '#d2691e';
      context.fillRect(this.x, this.y, this.width, this.height);
    };
  }

  function createBread() {
    const maxY = canvas.height - 20;
    const breadY = Math.floor(Math.random() * maxY);
    const bread = new Bread(canvas.width, breadY);
    bread.draw();
    return bread;
  }

  let breads = [];
  setInterval(function() {
    breads.push(createBread());
  }, 2000);

  setInterval(function() {
    context.clearRect(0, 0, canvas.width, canvas.height);
    for(let i = 0; i < breads.length; i++) {
      breads[i].x -= 2;
      breads[i].draw();
      if (breads[i].x < -50) {
        breads.splice(i, 1);
        i--;
      }
    }
  }, 20);

  canvas.onclick = function(event) {
    const x = event.pageX - canvas.offsetLeft;
    const y = event.pageY - canvas.offsetTop;
    for (let i = 0; i < breads.length; i++) {
      if (x > breads[i].x && x < breads[i].x + breads[i].width &&
          y > breads[i].y && y < breads[i].y + breads[i].height) {
        breads.splice(i, 1);
        score++;
        document.getElementById('score').innerText = 'Score: ' + score;
      }
    }
  };
};

</script>
</head>

<body>

<div class="container">

<br/><br/>
<h2 id="breadScore"><span id="score">Score: 0</span></h2>

<canvas id="myCanvas"></canvas>

</div>

</body>
</html>