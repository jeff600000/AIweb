<!-- I need to put this here, dont ask why --><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bread Quest</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f3eac2;
            margin: 0;
            overflow: hidden;
        }
        #gameCanvas {
            display: block;
            margin: 0 auto;
            background-color: #fff5e1;
            border: 5px solid #d9c7a3;
        }
        #startScreen, #endScreen {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        #startButton, #restartButton {
            background-color: #d9c7a3;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            cursor: pointer;
            margin-top: 20px;
        }
        #score {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 20px;
            color: #775e3b;
        }
    </style>
</head>
<body>

<div id="startScreen">
    <h1>Bread Quest</h1>
    <button id="startButton">Start Game</button>
</div>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<div id="score">Score: 0</div>

<div id="endScreen" style="display: none;">
    <h1>Game Over</h1>
    <div id="finalScore"></div>
    <button id="restartButton">Restart Game</button>
</div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const startScreen = document.getElementById('startScreen');
    const endScreen = document.getElementById('endScreen');
    const startButton = document.getElementById('startButton');
    const restartButton = document.getElementById('restartButton');
    const scoreElement = document.getElementById('score');
    const finalScore = document.getElementById('finalScore');
    
    let score = 0;
    let gameInterval;
    let gameOver = false;
    let player = { x: 50, y: 50, width: 40, height: 40 };
    let breadPieces = [];
    let obstacles = [];

    startButton.addEventListener('click', startGame);
    restartButton.addEventListener('click', restartGame);

    function startGame() {
        startScreen.style.display = 'none';
        gameOver = false;
        score = 0;
        player.x = 50;
        player.y = 50;
        breadPieces = generateItems(5, 'bread');
        obstacles = generateItems(3, 'obstacle');
        scoreElement.textContent = `Score: ${score}`;
        gameInterval = setInterval(gameLoop, 1000 / 60);
    }

    function restartGame() {
        endScreen.style.display = 'none';
        startGame();
    }

    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawPlayer();
        drawItems(breadPieces, 'brown');
        drawItems(obstacles, 'red');
        checkCollisions();
        movePlayer();
    }

    function drawPlayer() {
        ctx.fillStyle = 'blue';
        ctx.fillRect(player.x, player.y, player.width, player.height);
    }

    function drawItems(items, color) {
        ctx.fillStyle = color;
        items.forEach(item => ctx.fillRect(item.x, item.y, item.width, item.height));
    }

    function generateItems(count, type) {
        let items = [];
        for (let i = 0; i < count; i++) {
            items.push({
                x: Math.floor(Math.random() * (canvas.width - 20)),
                y: Math.floor(Math.random() * (canvas.height - 20)),
                width: 20,
                height: 20,
                type: type
            });
        }
        return items;
    }

    function checkCollisions() {
        breadPieces.forEach((bread, index) => {
            if (isColliding(player, bread)) {
                breadPieces.splice(index, 1);
                score += 10;
                scoreElement.textContent = `Score: ${score}`;
                playSound('collect.mp3');
                if (breadPieces.length === 0) {
                    breadPieces = generateItems(5, 'bread');
                }
            }
        });

        obstacles.forEach(obstacle => {
            if (isColliding(player, obstacle)) {
                clearInterval(gameInterval);
                playSound('hit.mp3');
                endGame();
            }
        });
    }

    function endGame() {
        gameOver = true;
        finalScore.textContent = `Final Score: ${score}`;
        endScreen.style.display = 'flex';
    }

    function isColliding(entity1, entity2) {
        return (
            entity1.x < entity2.x + entity2.width &&
            entity1.x + entity1.width > entity2.x &&
            entity1.y < entity2.y + entity2.height &&
            entity1.y + entity1.height > entity2.y
        );
    }

    function movePlayer() {
        document.addEventListener('keydown', event => {
            if (event.key === 'ArrowRight') player.x += 5;
            if (event.key === 'ArrowLeft') player.x -= 5;
            if (event.key === 'ArrowUp') player.y -= 5;
            if (event.key === 'ArrowDown') player.y += 5;
        });

        player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
        player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));
    }

    function playSound(src) {
        const sound = new Audio(src);
        sound.play();
    }
</script>

</body>
</html>