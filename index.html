<!-- I need to put this here, dont ask why --><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breadventure</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
            background-color: #f3f2ef;
        }
        #startBtn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 10px 20px;
            font-size: 20px;
            cursor: pointer;
            background-color: #ffc107;
            border: none;
            border-radius: 5px;
            z-index: 10;
        }
    </style>
</head>
<body>
    <button id="startBtn">Start Your Breadventure!</button>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const context = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const startBtn = document.getElementById('startBtn');
        startBtn.addEventListener('click', startGame);

        let bread, hazards, powerUps, score;

        function startGame() {
            bread = {
                x: canvas.width / 2,
                y: canvas.height - 60,
                width: 50,
                height: 30,
                dx: 0,
                dy: 0,
                speed: 5
            };
            hazards = [];
            powerUps = [];
            score = 0;
            startBtn.style.display = 'none';
            requestAnimationFrame(update);
        }

        function update() {
            clearCanvas();
            moveBread();
            handleCollisions();
            spawnHazards();
            drawBread();
            drawHazards();
            drawScore();
            requestAnimationFrame(update);
        }

        function clearCanvas() {
            context.clearRect(0, 0, canvas.width, canvas.height);
        }

        function moveBread() {
            bread.x += bread.dx;
            bread.y += bread.dy;
            
            if (bread.x < 0) bread.x = 0;
            if (bread.x + bread.width > canvas.width) bread.x = canvas.width - bread.width;
            if (bread.y < 0) bread.y = 0;
            if (bread.y + bread.height > canvas.height) bread.y = canvas.height - bread.height;
        }

        function drawBread() {
            context.fillStyle = '#d2691e';
            context.fillRect(bread.x, bread.y, bread.width, bread.height);
        }

        function drawHazards() {
            hazards.forEach(hazard => {
                context.fillStyle = '#555';
                context.fillRect(hazard.x, hazard.y, hazard.width, hazard.height);
                hazard.y += hazard.speed;
            });

            hazards = hazards.filter(hazard => hazard.y < canvas.height);
        }

        function handleCollisions() {
            hazards.forEach((hazard, index) => {
                if (collision(bread, hazard)) {
                    endGame();
                }
            });
        }

        function drawScore() {
            context.fillStyle = '#000';
            context.font = '20px Arial';
            context.fillText(`Score: ${score}`, 10, 30);
        }

        function collision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        function spawnHazards() {
            if (Math.random() < 0.1) {
                const width = 40;
                const height = 40;
                const x = Math.random() * (canvas.width - width);
                const y = -height;
                const speed = Math.random() * 2 + 2;
                hazards.push({x, y, width, height, speed});
            }
        }

        function endGame() {
            context.fillStyle = 'rgba(255, 255, 255, 0.8)';
            context.fillRect(0, 0, canvas.width, canvas.height);
            context.fillStyle = '#000';
            context.font = '40px Arial';
            context.fillText('Game Over!', canvas.width / 2 - 100, canvas.height / 2);
            startBtn.style.display = 'block';
            startBtn.textContent = 'Restart Breadventure';
        }

        window.addEventListener('keydown', ({ key }) => {
            if (key === 'ArrowLeft') {
                bread.dx = -bread.speed;
            }
            if (key === 'ArrowRight') {
                bread.dx = bread.speed;
            }
            if (key === 'ArrowUp') {
                bread.dy = -bread.speed;
            }
            if (key === 'ArrowDown') {
                bread.dy = bread.speed;
            }
        });

        window.addEventListener('keyup', ({ key }) => {
            if (key === 'ArrowLeft' || key === 'ArrowRight') {
                bread.dx = 0;
            }
            if (key === 'ArrowUp' || key === 'ArrowDown') {
                bread.dy = 0;
            }
        });

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>