<!-- I need to put this here, dont ask why --><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bread Adventure Quest</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { background-color: #fff8e7; display: block; margin: auto; }
        #gameInfo {
            text-align: center;
            font-family: 'Arial', sans-serif;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="gameInfo">Arrow keys to move. Collect butter pats! üçû</div>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let keys = {};
        const stageWidth = window.innerWidth;
        const stageHeight = window.innerHeight - 50;
        canvas.width = stageWidth;
        canvas.height = stageHeight;

        class Bread {
            constructor() {
                this.x = 50;
                this.y = stageHeight - 60;
                this.width = 40;
                this.height = 40;
                this.speed = 2;
                this.dy = 0;
                this.jumpStrength = 15;
                this.jumping = false;
            }

            draw() {
                ctx.fillStyle = '#f5d7b9';
                ctx.fillRect(this.x, this.y, this.width, this.height);
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(this.x + 10, this.y + 10, 4, 0, Math.PI * 2);
                ctx.arc(this.x + 30, this.y + 10, 4, 0, Math.PI * 2);
                ctx.fill();
            }

            move() {
                if (keys['ArrowLeft']) this.x -= this.speed;
                if (keys['ArrowRight']) this.x += this.speed;
                if (keys['ArrowUp'] && !this.jumping) {
                    this.jumping = true;
                    this.dy = -this.jumpStrength;
                }

                this.y += this.dy;
                if (this.jumping || this.y < stageHeight - this.height) {
                    this.dy += 0.5;
                }

                if (this.y + this.height >= stageHeight) {
                    this.y = stageHeight - this.height;
                    this.jumping = false;
                }
            }
        }

        class ButterPat {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 10;
                this.height = 10;
            }

            draw() {
                ctx.fillStyle = '#ffe135';
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }

            collidesWith(bread) {
                return bread.x < this.x + this.width &&
                       bread.x + bread.width > this.x &&
                       bread.y < this.y + this.height &&
                       bread.y + bread.height > this.y;
            }
        }

        class ToasterGoal {
            constructor() {
                this.x = stageWidth - 70;
                this.y = stageHeight - 40;
                this.width = 40;
                this.height = 40;
            }

            draw() {
                ctx.fillStyle = '#8b4513';
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }

            collidesWith(bread) {
                return bread.x < this.x + this.width &&
                       bread.x + bread.width > this.x &&
                       bread.y < this.y + this.height &&
                       bread.y + bread.height > this.y;
            }
        }

        const bread = new Bread();
        let butterPats = [
            new ButterPat(stageWidth / 4, stageHeight - 100),
            new ButterPat(stageWidth / 2, stageHeight - 150),
            new ButterPat(stageWidth - 100, stageHeight - 200)
        ];
        const toaster = new ToasterGoal();
        let score = 0;

        function update() {
            ctx.clearRect(0, 0, stageWidth, stageHeight);

            bread.move();
            bread.draw();
            
            for (let i = 0; i < butterPats.length; i++) {
                butterPats[i].draw();
                if (butterPats[i].collidesWith(bread)) {
                    butterPats.splice(i, 1);
                    score++;
                    i--;
                }
            }

            toaster.draw();
            if (toaster.collidesWith(bread)) {
                alert('Congratulations! You collected ' + score + ' butter pats!');
                document.location.reload();
            }

            window.requestAnimationFrame(update);
        }

        window.addEventListener('keydown', e => keys[e.key] = true);
        window.addEventListener('keyup', e => keys[e.key] = false);

        update();
    </script>
</body>
</html>